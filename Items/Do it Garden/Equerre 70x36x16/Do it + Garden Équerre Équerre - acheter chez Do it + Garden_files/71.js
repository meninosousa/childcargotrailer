(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1024:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return h}));var r=n(31),a=n(966),c=n(50),o=n(51);const i=()=>r.a.app.environment===a.a.PROD?"production":"test",s=()=>{const e=Object(c.c)();switch(e){case Object(c.e)(o.a.DOITGARDEN):return"doitGarden";case Object(c.e)(o.a.MSERVICE):return"migrosService";default:return e}},u=e=>{return e&&e.baseProduct?(t=e.baseProduct).startsWith("b")?t.substring(1):t:e.code;var t},l=e=>e&&e.baseProduct&&!e.baseProduct.startsWith("b")?e.baseProduct:void 0,p=()=>{switch(Object(c.b)()){case o.a.MELECTRONICS:return"ZDsjzNwaw9AxGQWhzqMCsnjwYzwpQ7dzigdKXeuuiXeR97ao4phWLRwe2WrZRoPe";case o.a.SPORTXX:return"vg7jq6NUfgnPuNj2DCVTewx3NEjHgwnrxvrseQv6QbPYw7qTZXohkNJcQdyNmHUb";case o.a.BIKEWORLD:return"gvMQGMyUubWAA8JcQnAmTPg8tq8uwNxUdRLQdmz3gyWx4NvPmeBLnLKgNo4AqpuT";case o.a.DOITGARDEN:return"3ENRqNpKyHDgU6bjpJXZVeKrbLmEGqKb7nsHcUKpsN3VLveZPYF6ptFpEE8ubQTi";case o.a.MICASA:return"NXGPNoKJpNG3FQrX4ZBz2RAE9Q7AKTMhRd6kDqEhWWDrbcuYdpYykQvPZNRCQHGV";case o.a.MSERVICE:return"uMKWwFasYudpaHQcr9EaBRNFXJmAkG3hoP2rUWTwrQMMDLos7tyzrFXyN86UVWUm";default:return"ZDsjzNwaw9AxGQWhzqMCsnjwYzwpQ7dzigdKXeuuiXeR97ao4phWLRwe2WrZRoPe"}},d=()=>{switch(Object(c.b)()){case o.a.MELECTRONICS:return"MEL";case o.a.SPORTXX:return"SXX";case o.a.BIKEWORLD:return"BW";case o.a.DOITGARDEN:return"DOIT";case o.a.MICASA:return"MICASA";case o.a.MSERVICE:default:return""}},h=()=>{switch(Object(c.b)()){case o.a.MELECTRONICS:return"melectronics";case o.a.SPORTXX:return"sportxx";case o.a.BIKEWORLD:return"bikeworld";case o.a.DOITGARDEN:return"doit";case o.a.MICASA:return"micasa";case o.a.MSERVICE:default:return""}}},1460:function(e,t,n){"use strict";var r=n(890),a=n(1128),c=n(962),o=n(1027),i=r.RangeError;e.exports=function(e){var t=c(o(this)),n="",r=a(e);if(r<0||r==1/0)throw i("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},1958:function(e,t,n){var r=n(1026),a=n(1959);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==a},{toISOString:a})},1959:function(e,t,n){"use strict";var r=n(890),a=n(900),c=n(924),o=n(1960).start,i=r.RangeError,s=Math.abs,u=Date.prototype,l=u.toISOString,p=a(u.getTime),d=a(u.getUTCDate),h=a(u.getUTCFullYear),f=a(u.getUTCHours),m=a(u.getUTCMilliseconds),g=a(u.getUTCMinutes),b=a(u.getUTCMonth),v=a(u.getUTCSeconds);e.exports=c((function(){return"0385-07-25T07:06:39.999Z"!=l.call(new Date(-50000000000001))}))||!c((function(){l.call(new Date(NaN))}))?function(){if(!isFinite(p(this)))throw i("Invalid time value");var e=this,t=h(e),n=m(e),r=t<0?"-":t>9999?"+":"";return r+o(s(t),r?6:4,0)+"-"+o(b(e)+1,2,0)+"-"+o(d(e),2,0)+"T"+o(f(e),2,0)+":"+o(g(e),2,0)+":"+o(v(e),2,0)+"."+o(n,3,0)+"Z"}:l},1960:function(e,t,n){var r=n(900),a=n(1209),c=n(962),o=n(1460),i=n(1027),s=r(o),u=r("".slice),l=Math.ceil,p=function(e){return function(t,n,r){var o,p,d=c(i(t)),h=a(n),f=d.length,m=void 0===r?" ":c(r);return h<=f||""==m?d:((p=s(m,l((o=h-f)/m.length))).length>o&&(p=u(p,0,o)),e?d+p:p+d)}};e.exports={start:p(!1),end:p(!0)}},1974:function(e){e.exports=JSON.parse('{"widgets":{"cookie-banner":{"ok-button":"Hinweis schliessen"}}}')},1975:function(e){e.exports=JSON.parse('{"widgets":{"cookie-banner":{"ok-button":"Fermer l’information"}}}')},1976:function(e){e.exports=JSON.parse('{"widgets":{"cookie-banner":{"ok-button":"Chiudi l’informazione"}}}')},818:function(e,t,n){"use strict";n.r(t);var r,a,c=n(1),o=n.n(c),i=n(1024),s=n(5),u=n(61),l=n(63),p=n(15),d=n(908),h=n.n(d),f=n(885),m=n.n(f),g=n(909),b=n.n(g),v=n(884),x=n.n(v),k=(n(921),n(1029),n(898)),w=n(881),O=n(1030),C=n.n(O),E=n(1031),j=n.n(E),A=n(887),T=n.n(A),y=n(1069),S=n.n(y),L=(n(889),n(1210),n(1958),n(1131),n(940));!function(e){e.local="local",e.development="development",e.test="test",e.production="production"}(r||(r={}));var D,I,R,M,N,P,U,K,G=(a={},T()(a,r.local,"https://localhost:8000"),T()(a,r.development,"https://dev-web-api.migros.ch"),T()(a,r.test,"https://test-web-api.migros.ch"),T()(a,r.production,"https://web-api.migros.ch"),a),W=function(){function e(t,n){C()(this,e),T()(this,"environment",void 0),T()(this,"apiKey",void 0),this.environment=t,this.apiKey=n}var t,n,r,a;return j()(e,[{key:"fetchCookieBannerText",value:(a=h()(b.a.mark((function e(){var t,n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x()(t=x()(n="".concat(G[this.environment],"/widgets/cmd/legaldocument/cookie_banner/")).call(n,encodeURIComponent(L.i18n.language),"?key=")).call(t,this.apiKey),e.prev=1,e.next=4,fetch(r,{method:"GET",headers:{Accept:"text/markdown"}});case 4:if(!(a=e.sent).ok){e.next=9;break}return e.next=8,a.text();case 8:return e.abrupt("return",e.sent);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return a.apply(this,arguments)})},{key:"fetchLegalDocAcceptence",value:(r=h()(b.a.mark((function e(t){var n,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x()(n=x()(r="".concat(G[this.environment],"/widgets/cmd/legaldocaccept/trackingId/")).call(r,t,"?key=")).call(n,this.apiKey),e.prev=1,e.next=4,fetch(a,{method:"GET",headers:{Accept:"application/json"}});case 4:if(!(c=e.sent).ok){e.next=9;break}return e.next=8,c.json();case 8:return e.abrupt("return",!!e.sent);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return r.apply(this,arguments)})},{key:"setLegalDocAcceptence",value:(n=h()(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x()(n=x()(r="".concat(G[this.environment],"/widgets/cmd/legaldocaccept/trackingId/")).call(r,t,"?key=")).call(n,this.apiKey),e.prev=1,e.next=4,fetch(a,{method:"POST",body:S()(["COOKIE_BANNER"]),headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return n.apply(this,arguments)})},{key:"logCookieBannerEvent",value:(t=h()(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x()(t="".concat(G[this.environment],"/widgets/customer_events/cookie_banner?key=")).call(t,this.apiKey),e.prev=1,e.next=4,fetch(n,{method:"POST",body:S()({useragent:null===(r=Object(k.getWindow)())||void 0===r?void 0:r.navigator.userAgent,timestamp:(new Date).toISOString()}),headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})}]),e}(),Q=(D={},T()(D,r.local,"https://localhost:8000"),T()(D,r.development,"https://login.dev-migros.ch/api"),T()(D,r.test,"https://test-login.migros.ch/api"),T()(D,r.production,"https://login.migros.ch/api"),D),B=function(){function e(t){C()(this,e),T()(this,"environment",void 0),this.environment=t}var t;return j()(e,[{key:"fetchMigrosTrackingID",value:(t=h()(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Q[this.environment],"/trackingid"),e.prev=1,e.next=4,fetch(t,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});case 4:if(!(n=e.sent).ok){e.next=9;break}return e.next=8,n.json();case 8:return e.abrupt("return",e.sent.trackingId);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return t.apply(this,arguments)})}]),e}(),X=n(877),_=n.n(X),z=(n(883),n(1170)),q=n.n(z),V=n(1396),Z=["bikeworld","doitGarden","interio","melectronics","micasa","migrosService","rialto","sportxx"],H=function(e){var t=e.content,n=e.buttonLabel,r=e.backgroundColor,a=e.textColor,i=e.onButtonClick,s=Object(c.useContext)(w.d),u=q()(Z).call(Z,(function(e){return s&&e===s.themeId}))>=0?V.b.large:V.b.normal;return o.a.createElement(F,{backgroundColor:r},o.a.createElement(Y,null,o.a.createElement(ee,{dangerouslySetInnerHTML:{__html:t},textColor:a})),o.a.createElement($,null,n&&o.a.createElement(V.a,{size:u,onClick:i},n)))},J=Object(w.i)(I||(I=_()(["\n  from {\n    bottom: -70px;\n  }\n  to {\n    bottom: 0;\n  }\n"]))),F=w.m.div(R||(R=_()(["\n  #msrc-widget & {\n    position: fixed;\n    right: 0;\n    left: 0;\n    bottom: 0;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: row;\n\n    ","\n\n    animation: "," 1s;\n    background-color: ",";\n    box-shadow: 0 -3px 3px ",";\n    z-index: 2147483647;\n  }\n"])),w.j.mobile(M||(M=_()(["\n      flex-direction: column;\n      align-items: stretch;\n    "]))),J,(function(e){var t=e.backgroundColor,n=e.theme.colors;return t||n.tints.white[100]}),(function(e){return e.theme.colors.tints.gray[50]})),Y=w.m.div(N||(N=_()(["\n  #msrc-widget & {\n    display: flex;\n    align-items: stretch;\n    flex-direction: row;\n    margin: ",";\n    font-size: ",";\n  }\n"])),(function(e){var t,n=e.theme.spacings;return x()(t="".concat(n.small," ")).call(t,n.medium)}),(function(e){var t=e.theme;return q()(Z).call(Z,(function(e){return e===t.themeId}))>=0?t.fonts.sizes.text.xsmall:t.fonts.sizes.text.tiny})),$=w.m.div(P||(P=_()(["\n  #msrc-widget & {\n    display: flex;\n    align-items: stretch;\n    flex-direction: column;\n    margin: ",";\n  }\n"])),(function(e){var t,n=e.theme.spacings;return x()(t="".concat(n.small," ")).call(t,n.medium)})),ee=w.m.div(U||(U=_()(["\n  #msrc-widget & {\n    font-family: ",";\n    line-height: ",";\n    color: ",";\n    max-width: 900px;\n    & a {\n      color: ",";\n      white-space: nowrap;\n      text-decoration: none;\n      cursor: pointer;\n\n      :hover {\n        color: ",";\n      }\n    }\n  }\n"])),(function(e){return e.theme.fonts.families.text}),(function(e){return e.theme.lineHeight.normal}),(function(e){var t=e.textColor,n=e.theme.colors;return t||n.brand.text[100]}),(function(e){return e.theme.colors.brand.primary[100]}),(function(e){return e.theme.colors.brand.secondary[100]})),te=(K={},T()(K,L.SupportedLanguages.de,(function(){return n(1974)})),T()(K,L.SupportedLanguages.fr,(function(){return n(1975)})),T()(K,L.SupportedLanguages.it,(function(){return n(1976)})),K),ne=Object(L.useI18n)("msrc-privacy",te),re="cookie-banner-acceptance-state",ae=function(e){for(var t,n=/\[([^\[\]]+)\]\(([^)]+)\)/g,r=e||"";t=n.exec(e);){var a;r=r.replace(t[0],x()(a='<a href="'.concat(t[2],'" target="_blank" rel="noopener">')).call(a,t[1],"</a>"))}return r},ce=function(e){var t=e.acceptButtonText,n=e.cookieBannerText,r=e.backgroundColor,a=e.textColor,i=e.theme,s=e.env,u=e.webAPIKey,l=e.language,p=Object(c.useState)(n||""),d=m()(p,2),f=d[0],g=d[1],v=Object(c.useState)(!!Object(k.getCookie)(re)),x=m()(v,2),O=x[0],C=x[1],E=Object(c.useState)(null),j=m()(E,2),A=j[0],T=j[1],y=Object(c.useState)(null),S=m()(y,2),L=S[0],D=S[1],I=new W(s,u),R=new B(s),M=ne(l),N=m()(M,2),P=N[0],U=N[1];return Object(c.useEffect)((function(){if(!O){var e=function(){var e=h()(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=6;break}return e.t0=g,e.next=4,I.fetchCookieBannerText();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:return e.next=8,R.fetchMigrosTrackingID();case 8:if(t=e.sent,e.t2=!!t,!e.t2){e.next=14;break}return e.next=13,I.fetchLegalDocAcceptence(t);case 13:e.t2=!!e.sent;case 14:(n=e.t2)&&(Object(k.setCookie)(re,"true"),C(!0)),D(t),T(n);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[]),U&&f&&!O&&null!==A&&!A?o.a.createElement(w.a,{theme:i},o.a.createElement("div",{id:"msrc-widget"},o.a.createElement(H,{content:ae(f||""),buttonLabel:t||P.t("widgets.cookie-banner.ok-button"),onButtonClick:function(){Object(k.setCookie)(re,"true"),C(!0),L&&I.setLegalDocAcceptence(L).catch(),I.logCookieBannerEvent().catch()},backgroundColor:r,textColor:a}))):null},oe=n(275);t.default=()=>{const e=Object(s.useSelector)(l.c).dsgvoCookieBanner,t=Object(s.useSelector)(l.g).cookie,n=Object(s.useSelector)(p.j);Object(oe.a)((()=>{b(!0)}));const r=Object(c.useMemo)((()=>Object(i.c)()),[]),a=Object(c.useMemo)((()=>Object(i.g)()),[]),d=Object(i.b)(),h=Object(u.a)(),f=Object(c.useMemo)((()=>h("cookie.banner.text")),[]),m=Object(c.useMemo)((()=>h("cookie.banner.button.text")),[]),[g,b]=Object(c.useState)(!1);return g&&e&&t?o.a.createElement(ce,{language:n,env:r,theme:a,webAPIKey:d,cookieBannerText:f,acceptButtonText:m}):null}},966:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.COMMON="n/a",e.LOCAL="local",e.LOCAL_CCV2="local-ccv2-dev",e.LOCAL_P="local-p",e.LOCAL_PROD="local-prod",e.LOCAL_QUAL="local-qual",e.LOCAL_STAGE="local-stage",e.LOCAL_STAGE_2="local-stage-2",e.PROD="prod",e.QUAL="qual",e.STAGE="stage",e.STAGE_2="stage-2",e.CLOUD_DEV="cloud-dev",e.CLOUD_QUAL="cloud-qual",e.CLOUD_PROD="cloud-prod"}(r||(r={}))}}]);