(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[57],{1425:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return s}));var a=r(1464),i=r(1419),n=r(185);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e){if("string"!=typeof e){var t=o(e);throw new TypeError("(".concat(t,") date has to be a string"))}var r=Object(a.a)(new Date)("dd.MM.yyyy")(e);return Object(i.a)("yyyy-MM-dd")(r)},c=function(e){if("string"!=typeof e){var t=o(e);throw new TypeError("(".concat(t,") date has to be a string"))}var r=Object(n.a)(e);return Object(i.a)("dd.MM.yyyy")(r)},s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=(r.getFullYear()+10)%100,i=parseInt(t)+10;return i<a||!(i>a)&&parseInt(e)<parseInt(r.getMonth())+1}},1445:function(e,t,r){"use strict";var a=r(0),i=r(1485);t.a=function(){var e=Object(a.useContext)(i.a);return e||new Error("Toggle compound components cannot be rendered outside the Toggle component")}},1463:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return l}));var a=r(68),i=r(31),n=r(2),o=function(e){var t=e.setParam;return function(e){return t(a.h,Object(i.f)(e))}},l=function(e){return{type:n.pb,qty:e}}},1485:function(e,t,r){"use strict";r.d(t,"a",(function(){return Be}));var a=r(0),i=r.n(a),n=r(11),o=r(29),l=r(16),c=r(428),s=r(69),u=r(1),d=r(1445),f=function(e){var t=e.children,r=e.handleOpen,a=e.type,n=Object(d.a)().availability[a].onClick,o=null!=n?n:r;return i.a.createElement("button",{type:"button",disabled:!1===n,onClick:o||function(){}},t)},y=r(42),p=r(1634),b=(r(447),Object(n.connect)((function(e){return{isVSFE:Object(s.b)(e)}}))((function(e){var t=e.icons,r=e.type,a=e.isVSFE,n=Object(d.a)().availability[r],o=n.color,l=n.vsfeIcon;return i.a.createElement(y.a,{fill:o,icons:a&&l?{"mq-12345":p.a}:t})}))),v=r(9),_=r.n(v),O=r(13),m=r.n(O),g=r(408),j=r(228),E=r(446),h=r(24),S=r(14),A=r(10),I={delivery:{SEASONALLY_UNAVAILABLE_ARTICLES_SOLD_OUT:Object(A.defineMessages)({info:{id:"product_availability.delivery.seasonally_unavailable_articles_sold_out.info",defaultMessage:"delivery info Product is seasonally unavailable sold out"},moreInfo:{id:"product_availability.delivery.seasonally_unavailable_articles_sold_out.more_info",defaultMessage:"delivery more info Product is seasonally unavailable sold out"}}),NEW_ARTICLES_SOLD_OUT:Object(A.defineMessages)({info:{id:"product_availability.delivery.new_articles_sold_out.info",defaultMessage:"delivery info Product is new articles sold out"},moreInfo:{id:"product_availability.delivery.new_articles_sold_out.more_info",defaultMessage:"delivery more info Product is new articles sold out"}}),SOLD_OUT:Object(A.defineMessages)({moreInfo:{id:"product_availability.delivery.sold_out.more_info",defaultMessage:"Product is sold out"}}),ALMOST_SOLD_OUT:Object(A.defineMessages)({info:{id:"product_availability.delivery.almost_sold_out.info",defaultMessage:"Online no longer available. Last pieces still available in stores."},moreInfo:{id:"product_availability.delivery.almost_sold_out.more_info",defaultMessage:"Online no longer available. Last pieces still available in stores."}}),NOT_AVAILABLE:Object(A.defineMessages)({moreInfo:{id:"product_availability.delivery.not_available.more_info",defaultMessage:"Item can not be delivered home."}}),IMMEDIATELY_POSTAL:Object(A.defineMessages)({info:{id:"product_availability.delivery.immediately_postal.info",defaultMessage:"CHF {price}"},moreInfo:{id:"product_availability.delivery.immediately_postal.more_info",defaultMessage:"On {weekday}, {date}, if ordered {maxOrderDate}"}}),IMMEDIATELY_NOT_POSTAL:Object(A.defineMessages)({info:{id:"product_availability.delivery.immediately_not_postal.info",defaultMessage:"from CHF {price}"},moreInfo:{id:"product_availability.delivery.immediately_not_postal.more_info",defaultMessage:"From {weekday}, {date} (earliest possible date), if ordered {maxOrderDate}"}}),NOT_ENOUGH_QUANTITY:Object(A.defineMessages)({info:{id:"product_availability.delivery.not_enough_quantity.info",defaultMessage:"max {quantity} available"},moreInfo:{id:"product_availability.delivery.not_enough_quantity.more_info",defaultMessage:"A maximum of {quantity} pieces are deliverable to your home"}}),maxOrderDate:Object(A.defineMessages)({today:{id:"product_availability.delivery.max_order_date.today",defaultMessage:"before 1pm"},tomorrow:{id:"product_availability.delivery.max_order_date.tomorrow",defaultMessage:"by tomorrow 1pm"},monday:{id:"product_availability.delivery.max_order_date.monday",defaultMessage:"by Monday 1pm"}})},pickUp:{SEASONALLY_UNAVAILABLE_ARTICLES_SOLD_OUT:Object(A.defineMessages)({info:{id:"product_availability.pick_up.seasonally_unavailable_articles_sold_out.info",defaultMessage:"pick up info Product is seasonally unavailable sold out"},moreInfo:{id:"product_availability.pick_up.seasonally_unavailable_articles_sold_out.more_info",defaultMessage:"pick up more info Product is seasonally unavailable sold out"}}),NEW_ARTICLES_SOLD_OUT:Object(A.defineMessages)({info:{id:"product_availability.pick_up.new_articles_sold_out.info",defaultMessage:"pick up info Product is new articles sold out"},moreInfo:{id:"product_availability.pick_up.new_articles_sold_out.more_info",defaultMessage:"pick up more info Product is new articles sold out"}}),CUSTOMER_ORDER:Object(A.defineMessages)({info:{id:"product_availability.pick_up.customer_order.info",defaultMessage:"Product is customer order"},moreInfo:{id:"product_availability.pick_up.customer_order.more_info",defaultMessage:"Product is customer order"}}),SOLD_OUT:Object(A.defineMessages)({moreInfo:{id:"product_availability.pick_up.sold_out.more_info",defaultMessage:"Product is sold out"}}),NOT_AVAILABLE:Object(A.defineMessages)({moreInfo:{id:"product_availability.pick_up.not_available.more_info",defaultMessage:"Item cannot be picked up in a JUMBO store"}}),CHECK_OTHER_BRANCH:Object(A.defineMessages)({info:{id:"product_availability.pick_up.check_other_branch.info",defaultMessage:"Check other branch"}}),CHECK_AVAILABILITY:Object(A.defineMessages)({info:{id:"product_availability.pick_up.check_availability.info",defaultMessage:"Select branch"}}),PICK_UP_TODAY:Object(A.defineMessages)({info:{id:"product_availability.pick_up.pick_up_today.info",defaultMessage:"Free"},moreInfo:{id:"product_availability.pick_up.pick_up_today.more_info",defaultMessage:"Today from {time} in {store}"}}),PICK_UP_TOMORROW:Object(A.defineMessages)({info:{id:"product_availability.pick_up.pick_up_tomorrow.info",defaultMessage:"Free"},moreInfo:{id:"product_availability.pick_up.pick_up_tomorrow.more_info",defaultMessage:"Tomorrow from {time} in {store}"}}),PICK_UP_LATER:Object(A.defineMessages)({info:{id:"product_availability.pick_up.pick_up_later.info",defaultMessage:"Free"},moreInfo:{id:"product_availability.pick_up.pick_up_later.more_info",defaultMessage:"On {weekday}, {date}, from {time} in {store}"}}),NOT_ENOUGH_QUANTITY:Object(A.defineMessages)({info:{id:"product_availability.pick_up.not_enough_quantity.info",defaultMessage:"Max {quantity} available"}}),ONLY_IN_STORE:Object(A.defineMessages)({info:{id:"product_availability.pick_up.only_in_store.info",defaultMessage:"Only in store"},moreInfo:{id:"product_availability.pick_up.only_in_store.more_info",defaultMessage:"Only in store more info"}})}},k=r(1650),P=r.n(k);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var M=m()(P.a,{allowMultiple:!0})((function(e){var t=e.type,r=e.withDetails,a=e.withDivider,n=e.withParenthesis,l=Object(d.a)().availability,c=l.pickUp.key,s=l[t],f=s.key,y=s.quantity,p=s.price,b=s.date,v=s.weekday,O=s.time,m=s.maxOrderDate,A=s.storeName,k=Object(g.a)().formatMessage,P=r?"moreInfo":"info";if("delivery"===t&&f===o.a.NOT_AVAILABLE.key&&(c===o.b.ONLY_IN_STORE.key||c===o.b.NOT_AVAILABLE.key))return null;if(!I[t]||!I[t][f][P])return u.a.error("Translations for the '".concat(t,"' status '").concat(f,"' was not found")),null;if(m&&!I[t].maxOrderDate[m])return u.a.error("Translations for the '".concat(t,"' max order date '").concat(m,"' was not found")),null;var M=m?k(I[t].maxOrderDate[m]):null,T=v?E.a[v]:null;return i.a.createElement(h.a,{as:r?"p2":"p5",color:S.a.GREY_80},i.a.createElement("span",{styleName:_()("info",{"info--divider":a,"info--parenthesis":n})},i.a.createElement(j.a,w({},I[t][f][P],{values:{quantity:y,price:p,date:b,weekday:T?k(T):null,time:O,maxOrderDate:M,store:A}}))))})),T=(r(236),r(133)),D=m()(P.a,{allowMultiple:!0})((function(e){var t=e.withDivider,r=e.unit,a=e.as,n=e.children,o=Object(d.a)().availability.pickUp.storeQty;return o||0===o?i.a.createElement("div",{styleName:_()({"info--divider":t})},n," ",i.a.createElement(h.a,{as:a,color:S.a.GREY_80},o," ",Object(T.a)(r))):null})),L=r(64),C=r(7),N=r(1495),U=r(434),R=Object(A.defineMessages)({assemblyAvailable:{id:"product_availability.delivery.assembly_available",defaultMessage:"Assembly available"},assemblySelectInCart:{id:"product_availability.delivery.assembly_select_in_cart",defaultMessage:"Please select in cart"}}),H=Object(C.b)(L.c)((function(e){var t=e.intl.formatMessage,r=Object(d.a)().availability.deliveryOptions;return((null==r?void 0:r.options)||[]).filter((function(e){return e.type===U.a})).length?i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{icons:{"mq-12345":N.a}})," ",i.a.createElement(h.a,{as:"p4",isBold:!0,color:S.a.GREY_80},t(R.assemblyAvailable))," ",i.a.createElement(h.a,{as:"p4",color:S.a.GREY_80},"(",t(R.assemblySelectInCart),")")):null})),V=r(1419),Y=r(449),Q=r(262),q=r(445),F=Object(A.defineMessages)({openingHours:{id:"product_availability.pick_up.opening_hours.time",defaultMessage:"({weekday} from {from} to {to})"}});function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var x=Object(C.b)(L.c)((function(e){var t,r=e.forceOnAllStatuses,a=e.fallback,n=e.intl.formatMessage,o=e.translationOverrides,l=Object(d.a)().availability,c=l.pickUp,s=c.dateIso,f=c.openingHours,y=c.specialOpeningHours;if(!c.showOpeningHours&&!r)return null;var p=s||a;if(!Object(Y.a)(p)||!f)return u.a.error("Either the date or the openingHours are missing from the context",{context:l}),null;var b=null!==(t=Object(Q.c)(f,y,p))&&void 0!==t?t:{},v=b.from,_=b.to,O=Object(V.a)("E")(p).toLowerCase(),m=O?E.a[O]:null;if(!v||!_)return i.a.createElement(h.a,{as:"p4",color:S.a.GREY_80},i.a.createElement(q.a,{store:{opening_hours:f,special_opening_hours:y}}));var g=o?o.openingHours:F.openingHours;return(i.a.createElement(h.a,{as:"p4",color:S.a.GREY_80},i.a.createElement(j.a,B({},g,{values:{from:v.split(":").slice(0,2).join(":"),to:_.split(":").slice(0,2).join(":"),weekday:m?n(m):null}}))))})),G=r(1696),K=r(303),W=r(458);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var $=Object(L.c)((function(e){var t=e.typography,r=e.type,a=e.intl.formatMessage,n=e.translationOverrides,o=e.isBold,l=Object(d.a)().availability[r],c=l.color,s=l.key,f=l.date,y=l.dateIso,p=l.weekday,b=l.time;if(!W.a[r]||!W.a[r][s].title)return u.a.error("Translations for the '".concat(r,"' status '").concat(s,"' was not found")),null;var v=n&&n[r]&&n[r][s]?n[r][s]:W.a[r][s],_=!(Object(G.a)(Object(K.a)(5,new Date(Date.now())),y)>0)&&p?E.a[p]:null;return i.a.createElement(h.a,{as:t,color:c,isBold:o},i.a.createElement(j.a,X({},v.title,{values:{weekday:_?a(_):f,date:f,time:b}})))})),z=r(129),J=r.n(z),Z=r(19),ee=r.n(Z),te=r(23),re=r.n(te),ae=r(21),ie=r(1651),ne=r(174),oe=r(470),le=r(1464),ce=r(2224),se=r.n(ce),ue=r(6),de=r.n(ue),fe=r(194),ye=r.n(fe),pe=r(65),be=r(1425),ve=r(2347),_e=r(2348),Oe=r(2346),me="today",ge="tomorrow",je="monday",Ee=function(){var e=new Date(Date.now());if(Object(Oe.a)(e))return je;var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59);return Object(ve.a)(t,e)?me:Object(_e.a)(e)?je:ge};function he(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pe=function(e){var t=e.deliveryStatus,r=e.deliveryOptions,a=e.shippableQuantity;if(t.key===o.a.NOT_ENOUGH_QUANTITY.key)return Ie(Ie({},t),{},{quantity:a});if(t.key===o.a.IMMEDIATELY_POSTAL.key||t.key===o.a.IMMEDIATELY_NOT_POSTAL.key){var i=de()([],"options",r),n=i.map((function(e){return e.price})).filter(ye.a),l=ee()("date",se()((function(e){return e.date}),i)[0]),c="string"==typeof l?Object(le.a)(new Date(Date.now()))("yyyyMMdd")(l):null,s=Object(Y.a)(c)?Object(V.a)("E")(c).toLowerCase():null;return Ie(Ie({},t),{},{weekday:s,date:c?Object(be.c)(l):null,price:n.length?Object(pe.e)(Math.min.apply(Math,he(n))):null,quantity:a,maxOrderDate:Ee()})}return t},we=r(471),Me=r(616);function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e){var t=e.pickUpStatus,r=e.productAvailability,a=e.selectedQuantity,i=e.storeQuantity,n=e.transferQuantity,l=e.toggleStoreFinder;if(t.key===o.b.CHECK_AVAILABILITY.key)return De(De({},t),{},{onClick:l});if(t.key===o.b.CHECK_OTHER_BRANCH.key)return De(De({},t),{},{quantity:n,storeQty:i,onClick:l});if(t.key===o.b.NOT_ENOUGH_QUANTITY.key){var c=Object(Me.a)({productAvailability:r,transferQuantity:n,storeQuantity:i}).pickUpDate;return De(De({},t),{},{quantity:n,storeQty:i,dateIso:c})}if(t.key===o.b.PICK_UP_TODAY.key||t.key===o.b.PICK_UP_TOMORROW.key||t.key===o.b.PICK_UP_LATER.key){var s=Object(Me.a)({productAvailability:r,selectedQuantity:a,storeQuantity:i}),u=s.pickUpDate,d=s.pickUpDateAsString,f=Object(Y.a)(u)?Object(V.a)("E")(u).toLowerCase():null;return De(De({},t),{},{weekday:f,date:Object(Y.a)(u)?Object(be.c)(d):null,dateIso:u,time:Object(Y.a)(u)?Object(V.a)("HH:mm")(u):null,quantity:n,storeQty:i})}return t},Ne=r(26);function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,i,n=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qe={},qe=function(e,t){switch(t.type){case"SET_PRODUCT_AVAILABILITY":return Ve(Ve({},e),{},{productAvailability:t.payload});case"SET_DELIVERY_OPTIONS":return Ve(Ve({},e),{},{deliveryOptions:t.payload});case"SET_STORE_ID":return Ve(Ve({},e),{},{storeId:t.payload.storeId});default:return e}},Fe=function(e){var t,r,i,o,l=e.selectedQuantity,c=e.currentVariant,s=e.lang,d=e.selectedStoreId,f=e.selectedStoreName,y=e.selectedStoreOpeningHours,p=e.selectedStoreSpecialOpeningHours,b=e.toggleStoreFinder,v=e.trackPageView,_=e.isDeliveryOptionsDisabled,O=void 0!==_&&_,m=e.currentVariantAvailabilityByStore,g=void 0===m?{}:m,j=e.isVSFE,E=Object(n.useDispatch)(),h=Ue(Object(a.useReducer)(qe,Qe),2),S=h[0],A=S.deliveryOptions,I=S.productAvailability,k=S.storeId,P=h[1],w=Object(ne.a)().safePromise,M=null===(t=null==c||null===(r=c.purchase_options)||void 0===r?void 0:r.collect)||void 0===t||t,T=null===(i=null==c||null===(o=c.purchase_options)||void 0===o?void 0:o.deliver)||void 0===i||i;d!==k&&P({type:"SET_STORE_ID",payload:{storeId:d}}),Object(a.useEffect)((function(){var e=!0;return g&&g.variant_id===c.id&&!re()(g[k])?P({type:"SET_PRODUCT_AVAILABILITY",payload:g[k]}):w(Object(ie.a)({lang:s,id:c.id,storeId:k})).then((function(t){e&&P({type:"SET_PRODUCT_AVAILABILITY",payload:t})})),function(){e=!1}}),[c.id,s,k]);var D=Object(a.useRef)(J()(500,(function(e){var t=e.lang,r=e.selectedQuantity,a=e.currentVariantId,i=e.trackPageView,n=e.storeId;return w(function(e){var t=e.lang,r=e.id,a=e.query,i="/".concat(t,"/api/delivery-options/").concat(r,"?").concat(a);return Promise.resolve(ae.a.get(i)).then((function(e){return u.a.debug("getDeliveryOptions SUCCESS",{uri:i,response:e}),e})).catch((function(e){return u.a.error("getDeliveryOptions FAILURE",{uri:i,error:e}),Promise.reject(e)}))}({lang:t,id:a,query:"quantity=".concat(r).concat(null!=n?"&store_id=".concat(n):"")})).then((function(e){if(P({type:"SET_DELIVERY_OPTIONS",payload:e}),null!=e&&e.product_availability){var t=e.product_availability,r=e.pickup_dynamic_times.availability_time;t.transfer.time=r,t.store.time=r,P({type:"SET_PRODUCT_AVAILABILITY",payload:t})}i({deliveryOptions:e})}))})));Object(a.useEffect)((function(){O||D.current({lang:s,selectedQuantity:l,currentVariantId:c.id,trackPageView:v,storeId:d})}),[c.id,s,l,O,d]);var L=ee()("shipping.quantity",I),C=ee()("store.quantity",I),N=ee()("transfer.quantity",I),U=Object(a.useMemo)((function(){return Object(oe.a)({deliveryOptions:A,productAvailability:I,selectedQuantity:l,availabilityStatus:c.availability_status,articleType:c.article_type})}),[A,I,l,c.availability_status,c.article_type]),R=Object(a.useMemo)((function(){return Pe({deliveryStatus:U,deliveryOptions:A,shippableQuantity:L})}),[A,U,L]),H=Object(we.a)({storeId:k,storeOpeningHours:y,storeSpecialOpeningHours:p,productAvailability:I,selectedQuantity:l,isCollectible:M,isDeliverable:T,availabilityStatus:c.availability_status,articleType:c.article_type,isVSFE:j}),V=Object(a.useMemo)((function(){return Ve(Ve({},Ce({pickUpStatus:H,productAvailability:I,selectedQuantity:l,toggleStoreFinder:b,storeQuantity:C,transferQuantity:N})),{},{storeName:f,openingHours:y,specialOpeningHours:p})}),[H,I,l,b,C,N,f,y,p]);return Object(a.useEffect)((function(){return E(Object(Ne.q)(H,R)),function(){E(Object(Ne.q)({},{}))}}),[R,H]),{availability:{delivery:R,pickUp:V,deliveryOptions:A}}},Be=i.a.createContext();Be.displayName="ProductAvailability";var xe=function(e){var t=e.children,r=e.currentVariant,a=e.lang,n=e.selectedQuantity,l=e.selectedStore,c=e.toggleStoreFinder,s=e.trackPageView,d=e.isDeliveryOptionsDisabled,f=void 0!==d&&d,y=e.currentVariantAvailabilityByStore,p=void 0===y?{}:y,b=e.isVSFE,v=!l||l.is_open,_=Fe({currentVariant:r,lang:a,selectedQuantity:n,selectedStoreId:l?l.id:null,selectedStoreOpeningHours:l?l.opening_hours:{},selectedStoreSpecialOpeningHours:l?l.special_opening_hours:{},selectedStoreName:l?l.display_name:"",toggleStoreFinder:c,trackPageView:s,isDeliveryOptionsDisabled:f,currentVariantAvailabilityByStore:p,isVSFE:b}).availability;return!f&&_.delivery.key===o.a.NO_DATA.key||_.pickUp.key===o.b.NO_DATA.key?null:_.delivery.key===o.a.UNEXPECTED.key||_.pickUp.key===o.b.UNEXPECTED.key?(u.a.error("Unexpected availability status",_),null):i.a.createElement(Be.Provider,{value:{availability:_,selectedStoreIsOpen:v}},t)};xe.Clickable=f,xe.Icon=b,xe.Info=M,xe.StoreQty=D,xe.AssemblyInfo=H,xe.OpeningHours=x,xe.Title=$;t.b=Object(n.connect)((function(e){return{lang:Object(l.a)(e),selectedQuantity:Object(c.c)(e),isVSFE:Object(s.b)(e)}}))(xe)},1650:function(e,t,r){e.exports={info:"aoh_aoi","info--divider":"aoh_aoj","info--parenthesis":"aoh_aok"}},1651:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c}));var a=r(1),i=r(21),n=r(16),o=r(2),l=function(e){var t=e.lang,r=e.id,n=e.storeId,o="/".concat(t,"/api/v2/availability/").concat(r),l=n?"".concat(o,"?store_id=").concat(n):o;return Promise.resolve(i.a.get(l)).then((function(e){return a.a.debug("getProductAvailability SUCCESS",{uri:l,response:e}),e})).catch((function(e){return a.a.error("getProductAvailability FAILURE",{uri:l,error:e}),Promise.reject(e)}))},c=function(e){var t=e.id,r=e.storeIds;return function(e,l){var c=Object(n.a)(l()),s="/".concat(c,"/api/v2/availability/").concat(t,"/stores"),u=r?r.join(","):"",d=u?"".concat(s,"?store_ids=").concat(u):s;return i.a.get(d).then((function(r){return e({type:o.ob,payload:{availability:r.stores,variantId:t}}),a.a.debug("getProductAvailability SUCCESS",{uri:d,response:r}),r})).catch((function(e){a.a.error("getProductAvailability FAILURE",{uri:d,error:e})}))}}},1702:function(e,t,r){"use strict";r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return A})),r.d(t,"a",(function(){return I}));var a=r(1535),i=r(700),n=r(1),o=r(2),l=r(16),c=r(23),s=r.n(c),u=r(6),d=r.n(u),f=r(19),y=r.n(f),p=r(34),b=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"distance",o=d()(y()("default.STOREFINDER_SEARCH_DISTANCE",p.b),"STOREFINDER_SEARCH_DISTANCE",p.b);n.a.debug("build store search query (lat, long, services, sort, distance, sku)",{lat:e,long:t,services:r,sort:i,distance:o,variantId:a});var l="?center[lat]=".concat(e,"&center[lon]=").concat(t,"&sort=").concat(i,"&distance=").concat(o);return s()(r)?s()(a)&&void 0===a?l:l+"&variantId="+a:l+"&service="+r},v=r(463),_=function(e){return{type:o.wb,query:e}},O=function(e,t,r,a,i){return{type:o.xb,query:e,stores:t,facets:r,availability:a,variantId:i}},m=function(e,t,r){return{type:o.vb,query:e,error_code:t,error:r}},g=function(e,t){return function(r){var a=r.stores,i=r.facets,o=r.availability,l=r.variantId;try{return n.a.debug("fetchStores(".concat(t,"): handleResponse")),e(O(t,a,i.service.values,o,l))}catch(e){return n.a.error("fetchStores(".concat(t,"): probable render error:"),e),Promise.reject({error_code:"render",error:e})}}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,r){n.a.debug("fetchStores(".concat(e,"): starting"));var a=Object(l.a)(r());return t(_(e)),v.a.fetch(a,e).then(g(t,e)).catch((function(r){var a=m(e,r.error_code,r.error);n.a.warn("fetchStores(".concat(e,"): actionError"),a),t(a)}))}},E=function(){return{type:o.A}},h=function(e){return{type:o.z,error:e}},S=function(e){return{type:o.B,coords:e}},A=function(e,t){return function(r){return e?(r(E()),navigator.geolocation.getCurrentPosition((function(n){var o=new e.maps.Geocoder,l=46.83529,c=8.20689,s=isNaN(n.coords.latitude)?l:n.coords.latitude,u=isNaN(n.coords.longitude)?c:n.coords.longitude,d=b(s,u,"",t),f={lat:s,lng:u};return r(S(f)),r(j(d)),o.geocode({location:f},(function(t,n){return n===e.maps.GeocoderStatus.OK?(r(Object(i.a)("storeFinderSearch","location",t[0].formatted_address)),Promise.resolve(n)):Promise.reject(new a.a({_error:"An error has occurred. Please try again later."}))}),(function(e){return Promise.reject(new a.a({_error:"An error has occurred. Please try again later. ".concat(e)}))})),Promise.resolve(d)}),(function(e){return r(h(e)),Promise.reject(e)}))):Promise.reject(new a.a({_error:"Google object not defined"}))}},I=function(e,t,r){var i=t.location,n=t.services;return function(t){return e?i?(new e.maps.Geocoder).geocode({address:i,componentRestrictions:{country:"CH"}},(function(a,i){if(i===e.maps.GeocoderStatus.OK){var o=a[0].geometry.location,l={lat:46.83529,lng:8.20689},c=isNaN(o.lat())?l.lat:o.lat(),s=isNaN(o.lng())?l.lng:o.lng(),u=b(c,s,n,r);return t(j(u)),Promise.resolve(u)}return i===e.maps.GeocoderStatus.ZERO_RESULTS?(t(_("")),t(O("",[],[])),Promise.resolve({message:"Address not found. Please check the address is valid."})):(t(_("")),t(O("",[],[])),Promise.resolve({message:"An error has occurred. Please try again later."}))}),(function(e){return t(_("")),t(O("",[],[])),Promise.resolve({message:"An error has occurred. Please try again later. ".concat(e)})})):Promise.resolve(n?"?service="+n:""):Promise.reject(new a.a({_error:"Google object not defined"}))}}}}]);
//# sourceMappingURL=57.chunk.6d7296.js.map